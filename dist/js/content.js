(()=>{"use strict";var i;!function(i){i.isFilterCopycat="isFilterCopycat",i.maximumCommentAmount="maximumCommentAmount",i.isAllowEmojiOnlyComment="isAllowEmojiOnlyComment",i.isKillerOn="isKillerOn"}(i||(i={}));var l=function(i,l){chrome.storage.local.get(i,l)},t=[],n={},o=[],e="",d=function(i){t.includes(i)||t.push(i)};!function(){var v=!1;l(i.isFilterCopycat,(function(i){v=i.isFilterCopycat||!1}));var a=3;l(i.maximumCommentAmount,(function(i){a=i.maximumCommentAmount||3}));var u=!1;l(i.isAllowEmojiOnlyComment,(function(i){u=i.isAllowEmojiOnlyComment||!1}));var r=!0;l(i.isKillerOn,(function(i){r=i.isKillerOn||!0}));var s=function(){o.splice(0,o.length)},h=function(i){var l,t,n,o,e,d,v,a,u,r,s,h,m,c,f,C,w,g,O,N,p,y,A,T,E,b,x,j=null===(n=null===(t=null===(l=i.lastChild)||void 0===l?void 0:l.lastChild)||void 0===t?void 0:t.lastChild)||void 0===n?void 0:n.lastChild,F=null===(u=null===(a=null===(v=null===(d=null===(e=null===(o=null==j?void 0:j.childNodes[0])||void 0===o?void 0:o.lastChild)||void 0===e?void 0:e.firstChild)||void 0===d?void 0:d.lastChild)||void 0===v?void 0:v.lastChild)||void 0===a?void 0:a.firstChild)||void 0===u?void 0:u.textContent,K=null===(w=null===(C=null===(f=null===(c=null===(m=null===(h=null===(s=null===(r=null==j?void 0:j.childNodes[0])||void 0===r?void 0:r.lastChild)||void 0===s?void 0:s.firstChild)||void 0===h?void 0:h.lastChild)||void 0===m?void 0:m.lastChild)||void 0===c?void 0:c.lastChild)||void 0===f?void 0:f.firstChild)||void 0===C?void 0:C.firstChild)||void 0===w?void 0:w.textContent,L=null===(g=null==j?void 0:j.childNodes[1])||void 0===g?void 0:g.textContent,I=null===(x=null===(b=null===(E=null===(T=null===(A=null===(y=null===(p=null===(N=null===(O=null==j?void 0:j.childNodes[0])||void 0===O?void 0:O.lastChild)||void 0===N?void 0:N.firstChild)||void 0===p?void 0:p.lastChild)||void 0===y?void 0:y.lastChild)||void 0===A?void 0:A.lastChild)||void 0===T?void 0:T.lastChild)||void 0===E?void 0:E.lastChild)||void 0===b?void 0:b.lastChild)||void 0===x?void 0:x.childNodes[0],M=null==I?void 0:I.getAttribute("datetime");return F&&K&&M?{baseNode:i,tweetOwnerName:F||"",tweetOwnerTag:K||"",tweetContent:L||"",tweetTime:new Date(M||"")}:null};function m(i,l){for(var t=window.location.href.includes("status"),n=0,v=i;n<v.length;n++){var a=v[n];if("childList"===a.type){if(!t)return s(),void(e="");var u=window.location.href.split("status/").pop()||"";e===u||(s(),e=u),a.addedNodes.forEach((function(i){var l,t,n,e,v;if(i instanceof HTMLElement&&"css-175oi2r"===i.className&&"DIV"===i.nodeName&&null!==i.attributes.getNamedItem("data-testid")&&"ARTICLE"===(null===(n=null===(t=null===(l=i.lastChild)||void 0===l?void 0:l.lastChild)||void 0===t?void 0:t.lastChild)||void 0===n?void 0:n.nodeName)){var a=null===(v=null===(e=i.lastChild)||void 0===e?void 0:e.lastChild)||void 0===v?void 0:v.lastChild;if(a){var u=h(a);if(u){var r=u.tweetOwnerTag,s=u.tweetContent,m=u.tweetTime;""!==u.tweetOwnerName&&""!==r&&null!==m&&(c(r),f(s,r,m)?(d(r),C(a)):o.push(u),w())}}}}))}}}s();var c=function(i){void 0!==n[i]||(n[i]=0),n[i]++;var l=a>0,t=n[i]>a;l&&t&&d(i)},f=function(i,l,n){v&&function(i,l,t){i.startsWith("#")||o.forEach((function(n){var o=function(i,l){for(var t=Array.from({length:i.length+1},(function(){return Array.from({length:l.length+1}).fill(0)})),n=0;n<=i.length;n++)t[n][0]=n;for(var o=0;o<=l.length;o++)t[0][o]=o;for(n=1;n<=i.length;n++)for(o=1;o<=l.length;o++){var e=i[n-1]===l[o-1]?0:1;t[n][o]=Math.min(t[n-1][o]+1,t[n][o-1]+1,t[n-1][o-1]+e)}return t[i.length][l.length]}(i,n.tweetContent)<10,e=l===n.tweetOwnerTag;if(o&&!e){var v=t<n.tweetTime;d(v?l:n.tweetOwnerTag)}}))}(i||"",l,n);var e=0===((null==i?void 0:i.trim())||"").length,a=r&&(!u&&e||t.includes(l));return a};window.onload=function(){new MutationObserver(m).observe(document.body,{childList:!0,subtree:!0,attributes:!0})};var C=function(i){var l;null===(l=i.parentElement)||void 0===l||l.remove()},w=function(){o.forEach((function(i){f(i.tweetContent,i.tweetOwnerTag,i.tweetTime)&&(d(i.tweetOwnerTag),C(i.baseNode),g(i))}))},g=function(i){o.splice(o.indexOf(i),1)}}()})();