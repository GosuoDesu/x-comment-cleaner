(()=>{"use strict";var i;!function(i){i.isFilterCopycat="isFilterCopycat",i.maximumCommentAmount="maximumCommentAmount",i.isAllowEmojiOnlyComment="isAllowEmojiOnlyComment",i.isKillerOn="isKillerOn",i.blackListOwnerTags="blackListOwnerTags"}(i||(i={}));var l=function(i,l){chrome.storage.local.get(i,l)},t=[],n={},o=[],e="",d=function(n){var o,e;t.includes(n)||(t.push(n),o=i.blackListOwnerTags,e=n,l(o,(function(i){var l=i[o]||[];l.push(e),function(i,l){var t;chrome.storage.local.set(((t={})[i]=l,t))}(o,l)})))};!function(){var a=!1;l(i.isFilterCopycat,(function(i){a=i.isFilterCopycat||!1}));var v=3;l(i.maximumCommentAmount,(function(i){v=i.maximumCommentAmount||3}));var r=!1;l(i.isAllowEmojiOnlyComment,(function(i){r=i.isAllowEmojiOnlyComment||!1}));var u=!0;l(i.isKillerOn,(function(i){u=i.isKillerOn||!0})),l(i.blackListOwnerTags,(function(i){t.push.apply(t,i.blackListOwnerTags||[])}));var s=function(){o.splice(0,o.length)},h=function(i){var l,t,n,o,e,d,a,v,r,u,s,h,c,m,f,C,w,g,O,p,T,b,N,y,A,E,L,x=null===(n=null===(t=null===(l=i.lastChild)||void 0===l?void 0:l.lastChild)||void 0===t?void 0:t.lastChild)||void 0===n?void 0:n.lastChild,k=null===(r=null===(v=null===(a=null===(d=null===(e=null===(o=null==x?void 0:x.childNodes[0])||void 0===o?void 0:o.lastChild)||void 0===e?void 0:e.firstChild)||void 0===d?void 0:d.lastChild)||void 0===a?void 0:a.lastChild)||void 0===v?void 0:v.firstChild)||void 0===r?void 0:r.textContent,j=null===(w=null===(C=null===(f=null===(m=null===(c=null===(h=null===(s=null===(u=null==x?void 0:x.childNodes[0])||void 0===u?void 0:u.lastChild)||void 0===s?void 0:s.firstChild)||void 0===h?void 0:h.lastChild)||void 0===c?void 0:c.lastChild)||void 0===m?void 0:m.lastChild)||void 0===f?void 0:f.firstChild)||void 0===C?void 0:C.firstChild)||void 0===w?void 0:w.textContent,F=null===(g=null==x?void 0:x.childNodes[1])||void 0===g?void 0:g.textContent,K=null===(L=null===(E=null===(A=null===(y=null===(N=null===(b=null===(T=null===(p=null===(O=null==x?void 0:x.childNodes[0])||void 0===O?void 0:O.lastChild)||void 0===p?void 0:p.firstChild)||void 0===T?void 0:T.lastChild)||void 0===b?void 0:b.lastChild)||void 0===N?void 0:N.lastChild)||void 0===y?void 0:y.lastChild)||void 0===A?void 0:A.lastChild)||void 0===E?void 0:E.lastChild)||void 0===L?void 0:L.childNodes[0],I=null==K?void 0:K.getAttribute("datetime");return k&&j&&I?{baseNode:i,tweetOwnerName:k||"",tweetOwnerTag:j||"",tweetContent:F||"",tweetTime:new Date(I||"")}:null};function c(i,l){for(var t=window.location.href.includes("status"),n=0,a=i;n<a.length;n++){var v=a[n];if("childList"===v.type){if(!t)return s(),void(e="");var r=window.location.href.split("status/").pop()||"";e===r||(s(),e=r),v.addedNodes.forEach((function(i){var l,t,n,e,a;if(i instanceof HTMLElement&&"css-175oi2r"===i.className&&"DIV"===i.nodeName&&null!==i.attributes.getNamedItem("data-testid")&&"ARTICLE"===(null===(n=null===(t=null===(l=i.lastChild)||void 0===l?void 0:l.lastChild)||void 0===t?void 0:t.lastChild)||void 0===n?void 0:n.nodeName)){var v=null===(a=null===(e=i.lastChild)||void 0===e?void 0:e.lastChild)||void 0===a?void 0:a.lastChild;if(v){var r=h(v);if(r){var u=r.tweetOwnerTag,s=r.tweetContent,c=r.tweetTime;""!==r.tweetOwnerName&&""!==u&&null!==c&&(m(u),f(s,u,c)?(d(u),C(v)):o.push(r),w())}}}}))}}}s();var m=function(i){void 0!==n[i]||(n[i]=0),n[i]++;var l=v>0,t=n[i]>v;l&&t&&d(i)},f=function(i,l,n){a&&function(i,l,t){i.startsWith("#")||o.forEach((function(n){var o=function(i,l){for(var t=Array.from({length:i.length+1},(function(){return Array.from({length:l.length+1}).fill(0)})),n=0;n<=i.length;n++)t[n][0]=n;for(var o=0;o<=l.length;o++)t[0][o]=o;for(n=1;n<=i.length;n++)for(o=1;o<=l.length;o++){var e=i[n-1]===l[o-1]?0:1;t[n][o]=Math.min(t[n-1][o]+1,t[n][o-1]+1,t[n-1][o-1]+e)}return t[i.length][l.length]}(i,n.tweetContent)<10,e=l===n.tweetOwnerTag;if(o&&!e){var a=t<n.tweetTime;d(a?l:n.tweetOwnerTag)}}))}(i||"",l,n);var e=0===((null==i?void 0:i.trim())||"").length,v=u&&(!r&&e||t.includes(l));return v};window.onload=function(){new MutationObserver(c).observe(document.body,{childList:!0,subtree:!0,attributes:!0})};var C=function(i){var l;null===(l=i.parentElement)||void 0===l||l.remove()},w=function(){o.forEach((function(i){f(i.tweetContent,i.tweetOwnerTag,i.tweetTime)&&(d(i.tweetOwnerTag),C(i.baseNode),g(i))}))},g=function(i){o.splice(o.indexOf(i),1)}}()})();